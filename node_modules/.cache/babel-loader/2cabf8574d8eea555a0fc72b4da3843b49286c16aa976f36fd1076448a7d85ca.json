{"ast":null,"code":"import { mapState } from 'vuex';\n// import { player } from '../player'\nexport default {\n  data() {\n    return {\n      name: '',\n      position: 0,\n      duration: 267,\n      progress: ''\n    };\n  },\n  computed: {\n    ...mapState(['isPlaying'])\n  },\n  filters: {\n    formatTime(val) {\n      const min = Math.floor(val / 60);\n      const sec = Math.floor(val % 60);\n      return `${min}:${sec < 10 ? '0' : ''}${sec}`;\n    },\n    formatName(val) {\n      return val.replace(/\\.mp3$/, '');\n    }\n  },\n  mounted() {\n    const draw = () => {\n      // requestAnimationFrame(draw)\n      // const progress = player.position / player.duration\n      // this.progress = `${(progress * 100).toFixed(2)}%`\n      // this.position = player.position\n      // this.duration = player.duration\n      // this.name = player.current.file ? player.current.file.name : ''\n      const progress = this.position / this.duration;\n      this.progress = `${(progress * 100).toFixed(2)}%`;\n      this.position = this.position + 0.01;\n      this.duration = this.duration;\n      this.name = '随风';\n    };\n    draw();\n  }\n};","map":{"version":3,"names":["mapState","data","name","position","duration","progress","computed","filters","formatTime","val","min","Math","floor","sec","formatName","replace","mounted","draw","toFixed"],"sources":["src/components/ProgressBar.vue"],"sourcesContent":["<template>\n  <div class=\"progress\" :class=\"{ progress__playing: isPlaying }\">\n    <h2 class=\"progress_title\">{{ name | formatName }}</h2>\n    <p class=\"progress_text\">\n      {{ position | formatTime }} / {{ duration | formatTime }}\n    </p>\n    <div class=\"progress_line\">\n      <span :style=\"{ width: progress }\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n// import { player } from '../player'\nexport default {\n  data () {\n    return {\n      name: '',\n      position: 0,\n      duration: 267,\n      progress: ''\n    }\n  },\n  computed: {\n    ...mapState(['isPlaying'])\n  },\n  filters: {\n    formatTime (val) {\n      const min = Math.floor(val / 60)\n      const sec = Math.floor(val % 60)\n      return `${min}:${sec < 10 ? '0' : ''}${sec}`\n    },\n    formatName (val) {\n      return val.replace(/\\.mp3$/, '')\n    }\n  },\n  mounted () {\n    const draw = () => {\n      // requestAnimationFrame(draw)\n      // const progress = player.position / player.duration\n      // this.progress = `${(progress * 100).toFixed(2)}%`\n      // this.position = player.position\n      // this.duration = player.duration\n      // this.name = player.current.file ? player.current.file.name : ''\n      const progress = this.position / this.duration\n      this.progress = `${(progress * 100).toFixed(2)}%`\n      this.position = this.position + 0.01\n      this.duration = this.duration\n      this.name = '随风'\n    }\n\n    draw()\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.progress {\n  padding-left: 123px;\n  padding-right: 12px;\n  height: 100%;\n  border-radius: 6px 6px 0 0;\n  background-color: rgba(255, 255, 255, 0.5);\n  transition: all 0.6s ease;\n}\n.progress__playing {\n  transform: translateY(-100%);\n}\n.progress_title {\n  padding-top: 6px;\n  font-size: 12px;\n  font-weight: bold;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.progress_text {\n  padding-top: 2px;\n  padding-left: 2px;\n  font-size: 12px;\n  font-weight: bold;\n  color: #ccc;\n  transform: scale(0.6);\n  transform-origin: left top;\n}\n.progress_line {\n  height: 3px;\n  border-radius: 3px;\n  overflow: hidden;\n  background-color: #ddd;\n}\n.progress_line span {\n  display: block;\n  height: 100%;\n  background-color: #ec51a5;\n}\n</style>\n"],"mappings":"AAaA,SAAAA,QAAA;AACA;AACA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,QAAA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAN,QAAA;EACA;EACAO,OAAA;IACAC,WAAAC,GAAA;MACA,MAAAC,GAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAH,GAAA;MACA,MAAAI,GAAA,GAAAF,IAAA,CAAAC,KAAA,CAAAH,GAAA;MACA,UAAAC,GAAA,IAAAG,GAAA,mBAAAA,GAAA;IACA;IACAC,WAAAL,GAAA;MACA,OAAAA,GAAA,CAAAM,OAAA;IACA;EACA;EACAC,QAAA;IACA,MAAAC,IAAA,GAAAA,CAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,MAAAZ,QAAA,QAAAF,QAAA,QAAAC,QAAA;MACA,KAAAC,QAAA,OAAAA,QAAA,QAAAa,OAAA;MACA,KAAAf,QAAA,QAAAA,QAAA;MACA,KAAAC,QAAA,QAAAA,QAAA;MACA,KAAAF,IAAA;IACA;IAEAe,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}